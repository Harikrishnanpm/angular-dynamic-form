<form [formGroup]="dynamicForm" class="dynamic-form" (ngSubmit)="onFormSubmit()">
  <div class="row" *ngFor="let rowConfig of formConfig.controls">
    <div *ngFor="let cellConfig of rowConfig">


      <!-- <app-dynamic-form-select-control [formConfig]="cellConfig" [dynamicForm]="dynamicForm">
      </app-dynamic-form-select-control> -->
      <mat-form-field *ngIf="cellConfig.type == formControlTypes.select" class="example-full-width">
        <mat-label>{{cellConfig.label}}</mat-label>
        <mat-select [placeholder]="cellConfig.label" #singleSelect>
          <mat-option>
            <ngx-mat-select-search placeholderLabel="Search..." noEntriesFoundLabel="No Result Found!"
              [formControlName]="cellConfig.key"></ngx-mat-select-search>
          </mat-option>
          <mat-option *ngFor="let data of cellConfig.data" [value]="data[cellConfig.dataIdParam]">
            {{data[cellConfig.dataValueParam]}}
          </mat-option>
        </mat-select>
        <mat-error>
          <app-error-message [dynamicFormControl]="dynamicForm.get([cellConfig.key])" [errorMessages]="validationErrorMessages[cellConfig.key]" ></app-error-message>
        </mat-error>
      </mat-form-field>

      <mat-form-field *ngIf="cellConfig.type == formControlTypes.multiSelect" class="example-full-width">
        <mat-label>{{cellConfig.label}}</mat-label>
        <mat-select [formControlName]="cellConfig.key" multiple>
          <mat-option>
            <ngx-mat-select-search placeholderLabel="Search..." noEntriesFoundLabel="No Result Found!"
              [formControlName]="cellConfig.key"></ngx-mat-select-search>
          </mat-option>
          <mat-option *ngFor="let data of cellConfig.data" [value]="data[cellConfig.dataIdParam]">{{data[cellConfig.dataValueParam]}}
          </mat-option>
        </mat-select>
        <mat-error>
          <app-error-message [dynamicFormControl]="dynamicForm.get([cellConfig.key])" [errorMessages]="validationErrorMessages[cellConfig.key]"></app-error-message>
        </mat-error>
      </mat-form-field>
      <!-- SINGLE SELECT -->


      <!-- TEXT INPUT -->
      <mat-form-field *ngIf="cellConfig.type == formControlTypes.text" class="example-full-width">
        <mat-label>{{cellConfig.label}}</mat-label>
        <input matInput [id]="cellConfig.key" [formControlName]="cellConfig.key" [placeholder]="cellConfig.label">
        <mat-error>
          <app-error-message [dynamicFormControl]="dynamicForm.get([cellConfig.key])" [errorMessages]="validationErrorMessages[cellConfig.key]"></app-error-message>
        </mat-error>
      </mat-form-field>

      <!-- DATE PICKER -->
      <mat-form-field class="example-full-width date-picker" *ngIf="cellConfig.type == formControlTypes.datePicker">
        <mat-label>{{cellConfig.label}}</mat-label>
        <input matInput [formControlName]="cellConfig.key" [matDatepicker]="picker" placeholder="Choose a date">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
        <mat-error>
          <app-error-message [dynamicFormControl]="dynamicForm.get([cellConfig.key])" [errorMessages]="validationErrorMessages[cellConfig.key]"></app-error-message>
        </mat-error>
      </mat-form-field>

      <!-- MULTIPLE SELECT -->
      <div *ngIf="!cellConfig.type"></div>
    </div>
  </div>
  <button mat-raised-button color="primary">Submit</button>
</form>
